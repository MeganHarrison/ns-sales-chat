<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keap API Documentation</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header h1 {
            margin: 0;
            font-size: 28px;
        }
        .header p {
            margin: 5px 0 0 0;
            opacity: 0.9;
        }
        .tabs {
            display: flex;
            background: #f7f7f7;
            border-bottom: 2px solid #e0e0e0;
            padding: 0 20px;
        }
        .tab {
            padding: 15px 30px;
            cursor: pointer;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
        }
        .tab:hover {
            color: #333;
            background: rgba(102, 126, 234, 0.1);
        }
        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: white;
        }
        .content {
            display: none;
            height: calc(100vh - 140px);
        }
        .content.active {
            display: block;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .loader {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            font-size: 18px;
            color: #666;
        }
        .info-banner {
            background: #fff3cd;
            color: #856404;
            padding: 10px 20px;
            border-left: 4px solid #ffc107;
            margin: 20px;
            border-radius: 4px;
        }
        .info-banner strong {
            display: block;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ Keap API Documentation</h1>
        <p>Interactive API documentation powered by Swagger UI and Redoc</p>
    </div>

    <div class="tabs">
        <button class="tab active" onclick="showTab('swagger')">Swagger UI</button>
        <button class="tab" onclick="showTab('redoc')">Redoc</button>
        <button class="tab" onclick="showTab('info')">Setup Info</button>
    </div>

    <div id="swagger" class="content active">
        <iframe id="swagger-frame" data-src="swagger-ui.html"></iframe>
    </div>

    <div id="redoc" class="content">
        <iframe id="redoc-frame" data-src="redoc.html"></iframe>
    </div>

    <div id="info" class="content">
        <div style="padding: 20px; max-width: 1200px; margin: 0 auto;">
            <h2>üìã Setup Instructions</h2>

            <div class="info-banner">
                <strong>Quick Setup:</strong>
                To use these documentation viewers, simply open the corresponding HTML file in your browser.
            </div>

            <h3>Option 1: Using CDN (Recommended)</h3>
            <p>The Swagger UI and Redoc HTML files use CDN links, so they work immediately without any installation.</p>
            <ul>
                <li>Open <code>swagger-ui.html</code> for Swagger UI interface</li>
                <li>Open <code>redoc.html</code> for Redoc interface</li>
                <li>Open <code>keap-api-docs.html</code> (this file) for both in tabs</li>
            </ul>

            <h3>Option 2: Local Development Server</h3>
            <p>For better performance and to avoid CORS issues:</p>
            <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; overflow-x: auto;">
# Using Python
python -m http.server 8080

# Using Node.js
npx serve .

# Using PHP
php -S localhost:8080</pre>

            <h3>Option 3: Deploy to Cloudflare Workers</h3>
            <p>Create a worker that serves the OpenAPI spec:</p>
            <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; overflow-x: auto;">
export default {
  async fetch(request) {
    const url = new URL(request.url);

    if (url.pathname === '/openapi.json') {
      const spec = await KV.get('keap-openapi'); // Store in KV
      return new Response(spec, {
        headers: {
          'Content-Type': 'application/json',
          'Access-Control-Allow-Origin': '*'
        }
      });
    }

    // Serve documentation HTML
    return new Response(html, {
      headers: { 'Content-Type': 'text/html' }
    });
  }
};</pre>

            <h3>üîë API Authentication</h3>
            <p>To test API endpoints directly from the documentation:</p>
            <ol>
                <li>Click the "Authorize" button in Swagger UI</li>
                <li>Enter your API key in the <code>X-Keap-API-Key</code> field</li>
                <li>Or use Bearer token for OAuth authentication</li>
            </ol>

            <h3>üìö Features Comparison</h3>
            <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                <thead>
                    <tr style="background: #f0f0f0;">
                        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Feature</th>
                        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Swagger UI</th>
                        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Redoc</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;">Interactive API Testing</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">‚úÖ Yes</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">‚ùå No</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;">Clean Documentation</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">‚≠ê‚≠ê‚≠ê</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;">Search Functionality</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">‚úÖ Yes</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">‚úÖ Yes</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;">Code Examples</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">‚úÖ Multiple Languages</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">‚úÖ Multiple Languages</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;">Mobile Friendly</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">‚≠ê‚≠ê‚≠ê</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">‚≠ê‚≠ê‚≠ê‚≠ê</td>
                    </tr>
                </tbody>
            </table>

            <h3>üîó Useful Links</h3>
            <ul>
                <li><a href="https://developer.infusionsoft.com/" target="_blank">Keap Developer Portal</a></li>
                <li><a href="https://github.com/swagger-api/swagger-ui" target="_blank">Swagger UI GitHub</a></li>
                <li><a href="https://github.com/Redocly/redoc" target="_blank">Redoc GitHub</a></li>
                <li><a href="https://openapi.tools/" target="_blank">OpenAPI Tools Directory</a></li>
            </ul>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Update tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update content
            document.querySelectorAll('.content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');

            // Lazy load iframes
            const iframe = document.getElementById(tabName + '-frame');
            if (iframe && !iframe.src && iframe.dataset.src) {
                iframe.innerHTML = '<div class="loader">Loading documentation...</div>';
                iframe.src = iframe.dataset.src;
            }
        }

        // Load Swagger UI on page load
        window.onload = function() {
            const swaggerFrame = document.getElementById('swagger-frame');
            if (swaggerFrame && swaggerFrame.dataset.src) {
                swaggerFrame.src = swaggerFrame.dataset.src;
            }
        };
    </script>
</body>
</html>